name: CI

on: [push]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v1
    - name: build project
      run: |
        npm install
        npm run build
        ls -a
#     - name: ls -a via ssh
#       uses: garygrossgarten/github-action-ssh@release
#       with:
#         command: ls -a
#         host: ${{ secrets.HOST }}
#         username: ubuntu-0925860
#         password: ${{ secrets.PASSWORD }}
#         tryKeyboard: true
#         passphrase: ${{ secrets.PASSPHRASE }}
#         privateKey: ${{ secrets.PRIVATE_KEY}}
    - name: FTP-Deploy-Action
      uses: SamKirkland/FTP-Deploy-Action@2.0.0
      env:
        FTP_SERVER: ${{ secrets.HOST }}
        FTP_USERNAME: githubcicd
        FTP_PASSWORD: ${{ secrets.PASSWORD }}
        LOCAL_DIR: build
        REMOTE_DIR: var/www
        ARGS: --delete
